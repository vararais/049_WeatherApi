<!DOCTYPE html>
<html lang="id">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>WEATHER WEB</title>
        <style>
            body {
                font-family: sans-serif;
                padding: 20px;
            }
            input[type="text"] {
                padding: 8px;
                margin-right: 5px;
            }
            button {
                padding: 8px 12px;
                cursor: pointer;
            }
            #weather-info {
                margin-top: 15px;
            }
            #weather-info span {
                font-weight: bold;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <h1>REAL TIME WEATHER CHECKER</h1>
            <input type="text" id="kecamatanInput"/>
            <button onclick="getWeather()">CEK CUACA</button>
            <div id="weather-info"></div>
        </div>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

        <script>
            function getWeather() {
                const kecamatan = $('#kecamatanInput').val();
                const weatherInfoDiv = $('#weather-info');

                if (!kecamatan) {
                    weatherInfoDiv.html('<p style="color: red;">Nama kecamatan tidak boleh kosong!</p>');
                    return;
                }

                const apiKey = '3ab4a3f77611479ea3e40423250610';
                const urlApi = `http://api.weatherapi.com/v1/current.json?key=${apiKey}&q=${kecamatan}&aqi=no`;

                weatherInfoDiv.html('<p>Memuat data...</p>');

                 $.ajax({
                    url: urlApi,
                    method: "GET",
                    success: function (data){

                        const negara = data.location.country;
                        const provinsi = data.location.region;
                        const kecamatan = data.location.name;   
                        const suhu = data.current.temp_c;
                        const longitude = data.location.lon;
                        const latitude = data.location.lat;


                        const hasilHtml = `
                            <p><span>Negara</span>: ${negara}</p>
                            <p><span>Provinsi</span>: ${provinsi}</p>
                            <p><span>Kecamatan</span>: ${kecamatan}</p>
                            <p><span>Suhu</span>: ${suhu} Â°C</p>
                            <p><span>Longitude</span>: ${longitude}</p>
                            <p><span>Latitude</span>: ${latitude}</p>
                        `;
                    
                        weatherInfoDiv.html(hasilHtml);
                },
                error: function() {
                    weatherInfoDiv.html('<p style="color: red;">Lokasi tidak ditemukan atau terjadi kesalahan.</p>');
                }
            });
        }
    </body>
</html>